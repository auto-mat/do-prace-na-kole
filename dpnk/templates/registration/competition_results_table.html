{% load i18n %}
{% load static %}
{% load humanize %}
{% get_current_language as current_language_code %}

{% if competition.show_competition_results %}
<script>
$(document).ready(function() {
    var oTable = $('#results-table').DataTable({
        "processing": true,
        "serverSide": true,
        "ordering": false,
        "searching": true,
        "dom": "<'row'<'col-sm-4'l><'col-sm-4 search-company-div'><'col-sm-4'f>>" +
            "<'row'<'col-sm-12'tr>>" +
            "<'row'<'col-sm-5'i><'col-sm-7'p>>",
        "language": {
            "url": "{% static "js/datatables-plugins/i18n/" %}{{ current_language_code }}.json"
        },
        "initComplete": function(settings, json) {
            $("div.search-company-div").html('<input id="search-company" class="form-control input-sm" type="text" placeholder="Filtrovat společnost" />');
            $('#search-company').keyup(function () {
                oTable.column(7).search($(this).val()).draw();
            } );
        },
        "ajax": "{% url 'competition_result_list_json' competition.slug %}"
    });

});
</script>

<table id="results-table" class="table datatable table-condensed table-striped table-bordered">
<thead>
<tr>
{% for col in competition.get_columns %}
   <th scope="column" id={{ col.0 }}>{{ col.2|safe }}</th>
{% endfor %}
</thead>
<tbody>
</tbody>
</table>
{% else %}
   <p>
   {% trans "Výsledky této soutěže se nezobrazují" %}
   </p>
{% endif %}
