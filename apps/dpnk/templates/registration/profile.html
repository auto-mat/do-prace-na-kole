{% load url from future %}
{% load dpnk_tags %}
{% load i18n %}

{% include "messages_include.html" %}

{% if active %}

{% if profile.distance %}
   <a href="{% wp_url 'upravit_profil' %}"
      class="btn btn-block btn-success">{% trans "Osobní údaje vyplněny" %}</a>
{% else %}
   <a href="{% wp_url 'upravit_profil' %}"
      class="btn btn-block btn-warning">{% trans "Vyplňte své osobní údaje" %}</a>
{% endif %}

{% if team and approved_for_team == 'undecided' %}
   <a href="{% wp_url 'zmenit_tym' %}"
      class="btn btn-block btn-warning">{% trans "Členství v týmu čeká na schválení týmovým koodinátorem" %}</a>
{% elif approved_for_team == 'undecided' %}
   <a href="{% wp_url 'zmenit_tym' %}"
      class="btn btn-block btn-warning">{% trans "Vyberte tým" %}</a>
{% elif approved_for_team == 'denied' %}
   <a href="{% wp_url 'zmenit_tym' %}"
      class="btn btn-block btn-danger">{% trans "Členství v týmu zamítnuto, zvolit jiný tým" %}</a>
{% elif approved_for_team == 'approved' %}
   <a href="{% wp_url 'zmenit_tym' %}"
      class="btn btn-block btn-success">{% trans "Členství v týmu odsouhlaseno" %}</a>
{% endif %}

{% if profile.t_shirt_size %}
   {% if is_package_shipped %}
      <a href="#"
         class="btn btn-block btn-success disabled">{% trans "Velikost trika vyplněna" %}</a>
   {% else %}
      <a href="{% wp_url 'zmenit_triko' %}"
         class="btn btn-block btn-success">{% trans "Velikost trika vyplněna" %}</a>
   {% endif %}
{% else %}
   <a href="{% wp_url 'zmenit_triko' %}"
      class="btn btn-block btn-warning">{% trans "Vyplňte velikost trika" %}</a>
{% endif %}

{% if team.coordinator_campaign == profile %}
   {% if team.unapproved_members.count > 0 %}
      <a href="{% wp_url 'team_admin' %}"
         class="btn btn-block btn-warning">{% trans "Ve vašem týmu jsou neodsouhlasení členové. Odsouhlaste je!" %}</a>
   {% elif team.member_count < 2 %}
      <a href="{% wp_url 'team_admin' %}"
         class="btn btn-block btn-warning">{% trans "Aby byl tým úplný, potřebuje mít víc než jednoho člena. Pozvěte své kolegy!" %}</a>
   {% else %}
      <a href="{% wp_url 'team_admin' %}"
         class="btn btn-block btn-success">{% trans "Jste týmový koordinátor, přejít na správu týmu" %}</a>
   {% endif %}
{% endif %}

{% if not team %}
   <a href="#"
      class="btn btn-block btn-warning disabled">{% trans "Abyste mohli zadat platbu musíte napřed vyplnit tým" %}</a>
{% elif payment_status == 'no_admission' %}
   <a href="#"
      class="btn btn-block btn-success disabled">{% trans "Startovné se neplatí" %}</a>
{% elif payment_status == 'done' %}
   <a href="#"
      class="btn btn-block btn-success disabled">{% trans "Startovné úspěšně zaplaceno" %}</a>
{% elif payment_status == 'waiting' %}
   {% if payment_type == 'fc' %}
      <a href="{% wp_url 'typ_platby' %}"
         class="btn btn-block btn-warning">{% trans "Váš zaměstnavatel ještě poplatek nezaplatil" %}</a>
   {% elif payment_type == 'am' %}
      <a href="{% wp_url 'typ_platby' %}"
         class="btn btn-block btn-warning">{% trans "Vaše členství v Klubu přátel Auto*Mat se ověřuje" %}</a>
   {% else %}
      <a href="{% wp_url 'typ_platby' %}"
         class="btn btn-block btn-warning">{% trans "Čeká se na potvrzení platby" %}</a>
   {% endif %}
{% else %}
   <a href="{% wp_url 'typ_platby' %}"
      class="btn btn-block btn-warning">{% trans "Zaplatit startovné" %}</a>
{% endif %}

{% if team and payment_status == 'no_admission' or payment_status == 'done' and profile.t_shirt_size %}
   {% if is_package_shipped %}
      {% if is_package_delivered %}
         <a href="#"
            class="btn btn-block btn-success disabled">{% trans "Startovní balíček doručen" %}</a>
      {% else %}
         <a href="{% wp_url 'balicek' %}"
            class="btn btn-block btn-warning">{% trans "Startovní balíček odeslán, sledovat jeho pohyb" %}</a>
      {% endif %}
   {% else %}
      <a href=""
         class="btn btn-block btn-warning disabled">{% trans "Startovní balíček ještě nebyl odeslán" %}</a>
   {% endif %}
{% else %}
   <a href="#"
      class="btn btn-block btn-warning disabled">{% trans "Startovní balíček pošleme až budete mít vybraný tým, tričko a zaplacené startovné" %}</a>
{% endif %}

{% if not admissions_phase_is_active %}
   <a href="#"
      class="btn btn-block btn-warning disabled">{% trans "Přihlašování do soutěží ještě není aktivní" %}</a>
{% elif team and approved_for_team == 'approved' and team %}
   <a href="{% wp_url 'souteze' %}"
      class="btn btn-block btn-info">{% trans "Přihlásit se do soutěží" %}</a>
{% else %}
   <a href="#"
      class="btn btn-block btn-warning disabled">{% trans "Před přihlášením do soutěží musíte být součástí týmu" %}</a>
{% endif %}

<br/>

{% if cant_enter_competition_reason != 'can_enter' %}
<a href="#"
   class="btn btn-block btn-primary disabled">{% trans "Začít soutěžit budete moci až budete " %}{{cant_enter_competition_reason}}</a>
{% else %}
<form method="post" class="form-horizontal">{% csrf_token %}
<input type="hidden" value="true" name="enter_competition" />
<button class="submit submit_once btn btn-block btn-primary" type="button">{% trans "Začít soutěžit" %}</button>
</form>
{% endif %}

{% else %}
Tento profil byl zneaktivněn.</br>
<a href="{% wp_url 'logout' %}">{% trans "Odhlásit" %}</a>
{% endif %}
