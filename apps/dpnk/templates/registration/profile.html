{% extends "base_generic.html" %}
{% load url from future %}
{% load dpnk_tags %}
{% load i18n %}

{% block title %}Profil{% endblock %}
{% block content %}
{% include "messages_include.html" %}

{% if active %}

{% if profile.distance %}
   <a href="{% url 'upravit_profil' campaign_slug %}"
      class="btn btn-block btn-success">{% trans "Osobní údaje vyplněny" %}</a>
{% else %}
   <a href="{% url 'upravit_profil' campaign_slug %}"
      class="btn btn-block btn-warning">{% trans "Vyplňte své osobní údaje" %}</a>
{% endif %}

{% if team and approved_for_team == 'undecided' %}
   <a href="{% url 'zmenit_tym' campaign_slug %}"
      class="btn btn-block btn-warning">{% trans "Členství v týmu čeká na schválení týmovým koodinátorem" %}</a>
{% elif approved_for_team == 'undecided' %}
   <a href="{% url 'zmenit_tym' campaign_slug %}"
      class="btn btn-block btn-warning">{% trans "Vyberte tým" %}</a>
{% elif approved_for_team == 'denied' %}
   <a href="{% url 'zmenit_tym' campaign_slug %}"
      class="btn btn-block btn-danger">{% trans "Členství v týmu zamítnuto, zvolit jiný tým" %}</a>
{% elif approved_for_team == 'approved' %}
   <a href="{% url 'zmenit_tym' campaign_slug %}"
      class="btn btn-block btn-success">{% trans "Členství v týmu odsouhlaseno" %}</a>
{% endif %}

{% if profile.t_shirt_size %}
   {% if is_package_shipped %}
      <a href="#"
         class="btn btn-block btn-success disabled">{% trans "Velikost trika vyplněna" %}</a>
   {% else %}
      <a href="{% url 'zmenit_triko' campaign_slug %}"
         class="btn btn-block btn-success">{% trans "Velikost trika vyplněna" %}</a>
   {% endif %}
{% else %}
   <a href="{% url 'zmenit_triko' campaign_slug %}"
      class="btn btn-block btn-warning">{% trans "Vyplňte velikost trika" %}</a>
{% endif %}

{% if team.unapproved_members.count > 0 %}
   <a href="{% url 'team_admin' campaign_slug %}"
      class="btn btn-block btn-warning">{% trans "Ve vašem týmu jsou neodsouhlasení členové. Odsouhlaste je!" %}</a>
{% elif team.members.count < 2 %}
   <a href="{% url 'team_admin' campaign_slug %}"
      class="btn btn-block btn-warning">{% trans "Aby byl tým úplný, potřebuje mít víc než jednoho člena. Pozvěte své kolegy!" %}</a>
{% else %}
   <a href="{% url 'team_admin' campaign_slug %}"
      class="btn btn-block btn-success">{% trans "Přejít na správu týmu" %}</a>
{% endif %}

{% if not team %}
   <a href="#"
      class="btn btn-block btn-warning disabled">{% trans "Abyste mohli zadat platbu musíte napřed vyplnit tým" %}</a>
{% elif payment_status == 'no_admission' %}
   <a href="#"
      class="btn btn-block btn-success disabled">{% trans "Startovné se neplatí" %}</a>
{% elif payment_status == 'done' %}
   <a href="#"
      class="btn btn-block btn-success disabled">{% trans "Startovné úspěšně zaplaceno" %}</a>
{% elif payment_status == 'waiting' %}
   {% if payment_type == 'fc' %}
      <a href="{% url 'typ_platby' campaign_slug %}"
         class="btn btn-block btn-warning">{% trans "Váš zaměstnavatel ještě poplatek nezaplatil" %}</a>
   {% elif payment_type == 'am' %}
      <a href="{% url 'typ_platby' campaign_slug %}"
         class="btn btn-block btn-warning">{% trans "Vaše členství v Klubu přátel Auto*Mat se ověřuje" %}</a>
   {% else %}
      <a href="{% url 'typ_platby' campaign_slug %}"
         class="btn btn-block btn-warning">{% trans "Čeká se na potvrzení platby" %}</a>
   {% endif %}
{% else %}
   <a href="{% url 'typ_platby' campaign_slug %}"
      class="btn btn-block btn-warning">{% trans "Zaplatit startovné" %}</a>
{% endif %}

{% if profile.t_shirt_size and not profile.t_shirt_size.ship %}
   <div
      class="btn btn-block btn-success disabled">{% trans "Pokud nechcete žádné triko, startovní balíček se neposílá" %}</div>
{% elif team and payment_status == 'no_admission' or payment_status == 'done' and profile.t_shirt_size %}
   {% if is_package_shipped %}
      {% if is_package_delivered %}
         <a href="#"
            class="btn btn-block btn-success disabled">{% trans "Startovní balíček doručen" %}</a>
      {% else %}
         <a href="{% url 'balicek' campaign_slug %}"
            class="btn btn-block btn-warning">{% trans "Startovní balíček odeslán, sledovat jeho pohyb" %}</a>
      {% endif %}
   {% else %}
      <a href=""
         class="btn btn-block btn-warning disabled">{% trans "Startovní balíček ještě nebyl odeslán" %}</a>
   {% endif %}
{% else %}
   <a href="#"
      class="btn btn-block btn-warning disabled">{% trans "Startovní balíček pošleme až budete mít vybraný tým, tričko a zaplacené startovné" %}</a>
{% endif %}

{% if not admissions_phase.has_started %}
   <a href="#"
      class="btn btn-block btn-info disabled">{% trans "Přihlašování do soutěží ještě není aktivní" %}</a>
{% elif admissions_phase.has_finished %}
   <a href="#"
      class="btn btn-block btn-info disabled">{% trans "Přihlašování do soutěží již není aktivní" %}</a>
{% elif team and approved_for_team == 'approved' and team %}
   <a href="{% url 'souteze' campaign_slug %}"
      class="btn btn-block btn-info">{% trans "Přihlásit se do soutěží" %}</a>
{% else %}
   <a href="#"
      class="btn btn-block btn-warning disabled">{% trans "Před přihlášením do soutěží musíte být součástí týmu" %}</a>
{% endif %}

<br/>
<br/>

{% if cant_enter_competition_reason != 'can_enter' %}
<div
   class="btn btn-block btn-primary disabled"><strong>{% trans "Začít soutěžit budete moci až budete " %}{{cant_enter_competition_reason}}</strong></div>
{% elif not competition_entry_active %}
<div class="btn btn-block btn-primary disabled"><strong>{% trans "Začít soutěžit" %}</strong></div>
{% else %}
<form method="post" class="form-horizontal">{% csrf_token %}
<input type="hidden" value="true" name="enter_competition" />
<button class="submit submit_once btn btn-block btn-primary" type="submit"><strong style="font-size:20px">{% trans "Začít soutěžit" %}</strong></button>
</form>
{% endif %}

{% else %}
Tento profil byl zneaktivněn.</br>
<a href="{% url 'logout' campaign_slug %}">{% trans "Odhlásit" %}</a>
{% endif %}
{% endblock %}
