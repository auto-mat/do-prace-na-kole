{% load url from future %}
{% load dpnk_tags %}
{% load humanize %}
{% load softhyphen_tags %}

<h4>Výsledky v soutěži {{ competition }}:</h4>
<div></div>

<table class="table table-condensed table-striped table-bordered">
<tr>
<th scope="column">Po&shy;řa&shy;dí</th>
<th scope="column">
   {% if competition.type == 'length' %}
      Ki&shy;lo&shy;me&shy;trů
   {% elif competition.type == 'frequency' %}
      % jízd
   {% elif competition.type == 'questionnaire' %}
      Bo&shy;dů
   {% endif %}
   {% if competition.competitor_type != 'single_user' and competition.competitor_type != 'liberos' and competition.type != 'questionnaire' %}
      prů&shy;měr&shy;ně
   {% endif %}
</th>

{% if competition.type == 'frequency' %}
   <th>Cel&shy;ko&shy;vý po&shy;čet jí&shy;zd</th>
{% elif competition.type == 'length' and competition.competitor_type == 'team' %}
   <th>Cel&shy;ko&shy;vý po&shy;čet ki&shy;lo&shy;me&shy;trů</th>
{% endif %}

{% if competition.competitor_type != 'single_user' and competition.competitor_type != 'liberos' %}
<th scope="column">Po&shy;čet sou&shy;tě&shy;ží&shy;cí&shy;ch v
   {% if competition.competitor_type == 'team' %}
      tý&shy;mu
   {% elif competition.competitor_type == 'company' %}
      fir&shy;mě
   {% endif %}
</th>
{% endif %}

<th scope="column">
   {% if competition.competitor_type == 'single_user' or competition.competitor_type == 'liberos' %}
      Sou&shy;tě&shy;ží&shy;cí
   {% elif competition.competitor_type == 'team' %}
      Tým
   {% elif competition.competitor_type == 'company' %}
      Fir&shy;ma
   {% endif %}
</th>


</tr>
{% for result in results %}
   <tr class="
{% comment %}
   {% if competition.competitor_type == 'single_user' and userprofile == result.userprofile %}
         info
   {% elif competition.competitor_type == 'liberos' and userprofile == result.userprofile %}
         info
   {% elif competition.competitor_type == 'team' and userprofile.team == result.team %}
         info
   {% elif competition.competitor_type == 'company' and userprofile.team.subsidiary.company == result.company %}
         info
   {% endif %}
{% endcomment %}
   "id="row-{{result.id}}">
<td>
{% ifchanged result.result %}
   {{ forloop.counter|ordinal }}
{% endifchanged %}
</td>
{% if competition.type == 'frequency' %}
   <td>{{ result.result| percentage |floatformat:-1|intcomma  }}</td>
{% else %}
   <td>{{ result.result|floatformat:-1|intcomma  }}</td>
{% endif %}

{% if competition.type == 'frequency' or competition.type == 'length' and competition.competitor_type == 'team' %}
   <td>{{ result.get_total_result|floatformat:-1 }}</td>
{% endif %}

{% if competition.competitor_type != 'single_user' and competition.competitor_type != 'liberos' %}
<td>{{ result.team.member_count|intcomma }}</td>
{% endif %}
<td>
   {% if competition.competitor_type == 'single_user' or competition.competitor_type == 'liberos' %}
      {{ result.user_attendance|softhyphen:"cs-CZ" }}
   {% elif competition.competitor_type == 'team' %}
      {{ result.team|softhyphen:"cs-CZ" }}
   {% elif competition.competitor_type == 'company' %}
      {{ result.company|softhyphen:"cs-CZ" }}
   {% endif %}
</td>
</tr>
{% endfor %}
</table>
