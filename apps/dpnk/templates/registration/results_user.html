{% load url from future %}
{% load dpnk_tags %}
{% load humanize %}

<table class="table table-striped table-bordered">
   <tr>
      <th scope="column">Závod</th>
      <th scope="column">Typ</th>
      <th scope="column">Pořadí</th>
      <th scope="column">Hodnocení</th>
      <th scope="column">Počet závodníků</th>
   </tr>
   {% for competition in competitions %}
      <tr>
         <td>
            {% if competition.url %}
               <a href="{{ competition.url }}" target="_blank">{{ competition }}</a>
            {% else %}
               {{ competition }}
            {% endif %}
         </td>
         <td>
            {% if competition.type == 'questionnaire' %}
               dotazník
            {% elif competition.type == 'frequency' %}
               pravidelnost
            {% elif competition.type == 'length' %}
               vzdálenost
            {% endif %}
            {% if competition.competitor_type == 'single_user' %}
               jednotlivců
            {% elif competition.competitor_type == 'liberos' %}
               liberos
            {% elif competition.competitor_type == 'team' %}
               týmů
            {% elif competition.competitor_type == 'company' %}
               společností
            {% endif %}
         </td>
      {% if competition.is_actual %}
         <td><a href="{% wp_url 'vysledky_souteze' %}?soutez={{ competition.slug }}#row-{{ competition.my_results.id }}">{{ competition.my_results.position|add:"1"|ordinal }}</a></td>
         <td>{{ competition.my_results.result|floatformat:-2|intcomma }}
            {% if competition.type == 'length' %}
               Km
            {% elif competition.type == 'frequency' %}
               Jízd
            {% elif competition.type == 'questionnaire' %}
               b.
            {% endif %}
         </td>
      {% else %}
         <td>-</td>
         <td>-</td>
      {% endif %}
         <td>{{ competition.my_results.count|intcomma }}</td>
      </tr>
   {% endfor %}
</table>
