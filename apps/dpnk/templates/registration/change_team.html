{% extends "base_generic_registration_form.html" %}
{% load crispy_forms_tags %}
{% load i18n %}
{% load static %}

{% block extrahead %}
<script type="text/javascript" src="{% static "bow/bootstrap-select/dist/js/bootstrap-select.js"%}"></script>
<link rel="stylesheet" type="text/css" href="{% static "bow/bootstrap-select/dist/css/bootstrap-select.css"%}">
<script type="text/javascript" src="{% static "bow/jquery-form/jquery.form.js"%}"></script>
{{ block.super }}
{% endblock %}


{% block messages %}
<div class="alert alert-info">
   {% blocktrans %}
   Pokud je název společnosti, nebo adresa pobočky chybná, nezakládejte novou, ale žádejte opravu na <a href='mailto:kontakt@dopracenakole.net?subject=Žádost o změnu adresy společnosti, pobočky nebo týmu'>kontakt@dopracenakole.net</a>.
   {% endblocktrans %}
</div>
{{ block.super }}
{% endblock %}

{% block container_header %}
<style>
   #id_company_div:disabled,
   #id_company:disabled,
   #id_subsidiary:disabled,
   #id_team:disabled {
      visibility: hidden;
   }
</style>

<script>
   function activateOnclick(){
      eval($("#id_team_selected").attr("onClick"));
      eval($("#id_subsidiary_selected").attr("onClick"));
      eval($("#id_company_selected").attr("onClick"));
   }

   function switchCompanyForm(){
      if ($('#id_company_selected').is(':checked')) {
         $("#id_team_selected").prop("checked", true);
         $("#id_subsidiary_selected").prop("checked", true);
      }
      activateOnclick();
   }

   function switchSubsidiaryForm(){
      if ($('#id_subsidiary_selected').is(':checked')) {
         $("#id_team_selected").prop("checked", true);
      } else {
         $("#id_company_selected").prop("checked", false);
      } 
      activateOnclick();
   }

   function switchTeamForm(){
      if (! $('#id_team_selected').is(':checked')) {
         $("#id_subsidiary_selected").prop("checked", false);
         $("#id_company_selected").prop("checked", false);
      }
      activateOnclick();
   }

   $(function() {
      $("#id_company_selected").on("click", switchCompanyForm);
      $("#id_subsidiary_selected").on("click", switchSubsidiaryForm);
      $("#id_team_selected").on("click", switchTeamForm);

      $('#id_company').attr("data-live-search", true);
      $('#id_company').selectpicker();
   });

   //Team members approval form
   $.get('{% url "team_members" %}', function(data) {
      $("#members-form-container").append(data);
      $("#members-form").ajaxForm({replaceTarget: false, target: "#members-form"});
   });
</script>
{{ block.super }}
{% endblock %}

{% block container_footer %}
{{ block.super }}
<br/>
<h1>{% trans "Členové vašeho týmu" %}</h1>
<div id="members-form-container"></div>
{% endblock %}

{% block third_menu %}
<ul class="navbar nav navbar-nav the_submenu">
<li><a href="{% url 'edit_team' %}">{% trans "Upravit tým" %}</a></li>
<li><a href="{% url 'pozvanky' %}">{% trans "Pozvánky" %}</a></li>
</ul>
{% endblock %}
