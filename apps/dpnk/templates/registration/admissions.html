{% load url from future %}
{% load dpnk_tags %}
{% load i18n %}
{% load humanize %}
{% load softhyphen_tags %}

<div></div>
{% if competitions %}
<form name="admissions" method="POST">
<input type="hidden" id="admission_competition_id" name="admission_competition_id"/>
<input type="hidden" id="cancellation_competition_id" name="cancellation_competition_id"/>
<table id="rides" class="table table-bordered table-hover table-condensed">
   <tr>
      <th scope="column">{% trans "Sou&shy;těž" %}</th>
      <th scope="column">{% trans "Typ" %}</th>
      <th scope="column">{% trans "Akce" %}</th>
      <th scope="column">{% trans "Oblast" %}</th>
      <th scope="column">{% trans "Firemní soutěž" %}</th>
   </tr>
   {% for competition in competitions %}
      <tr>
         <td>
            {% if competition.url %}
               <a href="{{ competition.url }}" target="_blank">{{ competition|softhyphen:"cs-CZ" }}</a>
            {% else %}
               {{ competition|softhyphen:"cs-CZ" }}
            {% endif %}
         </td>
         <td>
            {% if competition.type == 'questionnaire' %}
               {% trans "do&shy;ta&shy;zník" %}
            {% elif competition.type == 'frequency' %}
               {% trans "pra&shy;vi&shy;del&shy;nost" %}
            {% elif competition.type == 'length' %}
               {% trans "vzdá&shy;le&shy;nost" %}
            {% endif %}
            {% if competition.competitor_type == 'single_user' %}
               {% trans "jed&shy;not&shy;liv&shy;ců" %}
            {% elif competition.competitor_type == 'liberos' %}
               {% trans "li&shy;be&shy;ros" %}
            {% elif competition.competitor_type == 'team' %}
               {% trans "tý&shy;mů" %}
            {% elif competition.competitor_type == 'company' %}
               {% trans "spo&shy;le&shy;čno&shy;stí" %}
            {% endif %}
         </td>
         <td>
            {% if competition.competitor_can_admit == True %}
            {% if competition.type == 'questionnaire' %}
               <a href="{% wp_url 'otazka' %}?questionaire={{ competition.slug }}">
                  {% if competition.competitor_has_admission %}
                     {% trans "změ&shy;nit od&shy;po&shy;vě&shy;di" %}
                  {% else %}
                     {% trans "vy&shy;pl&shy;nit do&shy;taz&shy;ník" %}
                  {% endif %}
               </a>
            {% elif competition.type == 'frequency' or competition.type == 'length' %}
               {% if competition.competitor_has_admission %}
                  <button type="submit" class="submit submit_once" onclick='$("#cancellation_competition_id").val("{{ competition.id }}")'>{% trans "Od&shy;hlá&shy;sit ze sou&shy;tě&shy;že" %}</button>
               {% else %}
                  <button type="submit" class="submit submit_once" onclick='$("#admission_competition_id").val("{{ competition.id }}")'>{% trans "Při&shy;hlá&shy;sit do sou&shy;tě&shy;že" %}</button>
               {% endif %}
            {% endif %}
            {% else %}
               {% if competition.competitor_can_admit == 'without_admission' %}
                  {% trans "Do té&shy;to sou&shy;tě&shy;že jste při&shy;hlá&shy;šen au&shy;to&shy;ma&shy;ti&shy;cky." %} 
               {% elif competition.competitor_can_admit == 'after_beginning' %}
                  {% if competition.competitor_has_admission %}
                     {% trans "Sou&shy;těž za&shy;ča&shy;la, již není mož&shy;né se od&shy;hlá&shy;sit." %} 
                  {% else %}
                     {% trans "Sou&shy;těž za&shy;ča&shy;la, již není mož&shy;né se při&shy;hlá&shy;sit." %} 
                  {% endif %}
               {% elif competition.competitor_can_admit == 'before_beginning' %}
                  {% trans "Do&shy;taz&shy;ník ješ&shy;tě ne&shy;ní ak&shy;tiv&shy;ní." %}
               {% elif competition.competitor_can_admit == 'after_end' %}
                  {% trans "Do&shy;taz&shy;ník již ne&shy;ní ak&shy;tiv&shy;ní." %}
                  <a href="{% wp_url 'otazka' %}?questionaire={{ competition.slug }}">zo&shy;bra&shy;zit vy&shy;hod&shy;no&shy;ce&shy;ní </a>
               {% elif competition.competitor_can_admit == 'not_team_coordinator' %}
                  {% if competition.competitor_has_admission %}
                     {% trans "Do té&shy;to sou&shy;tě&shy;že tý&shy;mů vás při&shy;hlá&shy;sil váš tý&shy;mo&shy;vý ko&shy;or&shy;di&shy;ná&shy;tor." %} 
                  {% else %}
                     {% trans "Do té&shy;to sou&shy;tě&shy;že týmů vás mu&shy;sí při&shy;hlá&shy;sit tý&shy;mo&shy;vý ko&shy;or&shy;di&shy;ná&shy;tor." %} 
                  {% endif %}
               {% elif competition.competitor_can_admit == 'not_company_admin' %}
                  {% if competition.competitor_has_admission %}
                     {% trans "Do té&shy;to sou&shy;tě&shy;že fi&shy;rem vás při&shy;hlá&shy;sil váš fi&shy;rem&shy;ní sprá&shy;vce." %} 
                  {% else %}
                     {% trans "Do té&shy;to sou&shy;tě&shy;že fi&shy;rem vás mu&shy;sí při&shy;hlá&shy;sit váš fi&shy;rem&shy;ní sprá&shy;vce." %} 
                  {% endif %}
               {% else %}
                  {{ competition.competitor_can_admit }}
               {% endif %}
            {% endif %}
         </td>
         <td>
            {% if competition.city %}
               {{ competition.city|softhyphen:"cs-CZ"}}
            {% else %}
               {% trans "Celá ČR" %}
            {% endif %}
         </td>
         <td>
            {% if competition.company %}
               {{ competition.company|softhyphen:"cs-CZ"}}
            {% else %}
               {% trans "Ne" %}
            {% endif %}
         </td>
      </tr>
   {% endfor %}
</table>
</form>
{% else %}
<div class="text-info">{% trans "Momentálně nejsou vypsány žádné soutěže, do kterých byste se mohl/a přihlásit" %}</div>
{% endif %}
